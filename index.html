<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>🕊️ Pancha Pakshi Calculator</title>
<style>
  body {
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: linear-gradient(to right, #eef2f3, #dfe9f3);
    margin: 0; padding: 20px; color: #222;
  }
  h2, h3 { text-align: center; }
  .container {
    max-width: 1000px; margin: auto; background: #fff;
    padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
  label { font-weight: bold; margin-right: 10px; }
  select, button {
    padding: 8px 12px; margin: 8px; border-radius: 8px; border: 1px solid #ccc;
    font-size: 14px;
  }
  button {
    background: #4CAF50; color: white; cursor: pointer;
    transition: 0.3s;
  }
  button:hover { background: #45a049; }
  table {
    width: 100%; border-collapse: collapse; margin: 10px 0;
  }
  th, td {
    border: 1px solid #ccc; padding: 8px; text-align: center;
  }
  th { background: #f4f4f4; }
  .highlight { background: #ffd966; font-weight: bold; }
  .summary {
    padding: 12px; border-radius: 10px; margin: 10px 0; color: #fff;
  }
  .today { background: #4CAF50; }
  .tomorrow { background: #2196F3; }
  .reply, .advice {
    margin-top: 15px; padding: 15px; border-radius: 10px;
    border: 1px solid #ccc; background: #fafafa;
  }
</style>
</head>
<body>
<div class="container">
  <h2>🕊️ Pancha Pakshi Calculator</h2>

  <label>🌙 Moon Phase:</label>
  <select id="moonPhase">
    <option value="">--Select--</option>
    <option value="valarpirai">🌙 Valarpirai (வளர்பிறை)</option>
    <option value="theipirai">🌑 Theipirai (தேய்பிறை)</option>
  </select>

  <label>⭐ Your Nakshatra:</label>
  <select id="nakshatra">
    <option value="">--Select--</option>
    <option>Ashwini</option><option>Bharani</option><option>Karthigai</option>
    <option>Rohini</option><option>Mrigashirsha</option><option>Thiruvathirai</option>
    <option>Punarpoosam</option><option>Poosam</option><option>Aayilyam</option>
    <option>Magam</option><option>Pooram</option><option>Uthiram</option>
    <option>Hastham</option><option>Chithirai</option><option>Swaathi</option>
    <option>Visakam</option><option>Anusham</option><option>Kettai</option>
    <option>Moolam</option><option>Pooradam</option><option>Uthiradam</option>
    <option>Thiruvonam</option><option>Avittam</option><option>Sathayam</option>
    <option>Poorattadhi</option><option>Uthirattadhi</option><option>Revathi</option>
  </select>
  <br><br>

  <button onclick="showBirdSchedule()">🔮 Show My Bird & Timetable</button>

  <div id="result" class="reply"></div>

  <hr>
  <h3>💞 Compatibility Check</h3>
  <label>Partner Nakshatra:</label>
  <select id="partnerNakshatra">
    <option value="">--Select--</option>
    <option>Ashwini</option><option>Bharani</option><option>Karthigai</option>
    <option>Rohini</option><option>Mrigashirsha</option><option>Thiruvathirai</option>
    <option>Punarpoosam</option><option>Poosam</option><option>Aayilyam</option>
    <option>Magam</option><option>Pooram</option><option>Uthiram</option>
    <option>Hastham</option><option>Chithirai</option><option>Swaathi</option>
    <option>Visakam</option><option>Anusham</option><option>Kettai</option>
    <option>Moolam</option><option>Pooradam</option><option>Uthiradam</option>
    <option>Thiruvonam</option><option>Avittam</option><option>Sathayam</option>
    <option>Poorattadhi</option><option>Uthirattadhi</option><option>Revathi</option>
  </select>
  <label>Moon Phase:</label>
  <select id="partnerPhase">
    <option value="">--Select--</option>
    <option value="valarpirai">🌙 Valarpirai (வளர்பிறை)</option>
    <option value="theipirai">🌑 Theipirai (தேய்பிறை)</option>
  </select>
  <br><br>
  <button onclick="checkCompatibility()">💞 Check Compatibility</button>

  <div id="compatResult" class="advice"></div>
</div>

<script>
// Bird mapping for Valarpirai (Shukla Paksha)
const pakshiMapValarpirai = {
  "Ashwini":"Vulture","Bharani":"Crow","Karthigai":"Cock","Rohini":"Owl","Mrigashirsha":"Peacock",
  "Thiruvathirai":"Cock","Punarpoosam":"Owl","Poosam":"Crow","Aayilyam":"Peacock","Magam":"Vulture",
  "Pooram":"Vulture","Uthiram":"Crow","Hastham":"Peacock","Chithirai":"Owl","Swaathi":"Cock",
  "Visakam":"Crow","Anusham":"Peacock","Kettai":"Owl","Moolam":"Vulture","Pooradam":"Cock",
  "Uthiradam":"Owl","Thiruvonam":"Peacock","Avittam":"Crow","Sathayam":"Vulture",
  "Poorattadhi":"Cock","Uthirattadhi":"Owl","Revathi":"Crow"
};

// Bird mapping for Theipirai (Krishna Paksha)
const pakshiMapTheipirai = {
  "Ashwini":"Crow","Bharani":"Cock","Karthigai":"Owl","Rohini":"Peacock","Mrigashirsha":"Vulture",
  "Thiruvathirai":"Cock","Punarpoosam":"Peacock","Poosam":"Owl","Aayilyam":"Crow","Magam":"Cock",
  "Pooram":"Vulture","Uthiram":"Peacock","Hastham":"Crow","Chithirai":"Cock","Swaathi":"Owl",
  "Visakam":"Vulture","Anusham":"Crow","Kettai":"Cock","Moolam":"Owl","Pooradam":"Peacock",
  "Uthiradam":"Vulture","Thiruvonam":"Cock","Avittam":"Owl","Sathayam":"Crow",
  "Poorattadhi":"Vulture","Uthirattadhi":"Peacock","Revathi":"Owl"
};

const birdTamil = {
  "Cock":"கோழி", "Owl":"ஆந்தை", "Vulture":"கழுகு",
  "Crow":"காக்கை", "Peacock":"மயில்"
};

const cycle = {
  "Cock":["Sleeping","Ruling","Walking","Eating","Dying"],
  "Owl":["Eating","Sleeping","Ruling","Walking","Dying"],
  "Vulture":["Walking","Eating","Sleeping","Ruling","Dying"],
  "Crow":["Ruling","Walking","Eating","Sleeping","Dying"],
  "Peacock":["Dying","Ruling","Walking","Eating","Sleeping"]
};

const stateTamil = {
  "Sleeping":"தூக்கம்", "Ruling":"ஆட்சி", "Walking":"நடப்பது",
  "Eating":"உண்ணுதல்", "Dying":"மரணம்"
};

const compatibility = {
  "Cock":{"Cock":"Good","Owl":"Neutral","Vulture":"Bad","Crow":"Good","Peacock":"Neutral"},
  "Owl":{"Cock":"Neutral","Owl":"Good","Vulture":"Neutral","Crow":"Bad","Peacock":"Good"},
  "Vulture":{"Cock":"Bad","Owl":"Neutral","Vulture":"Good","Crow":"Neutral","Peacock":"Bad"},
  "Crow":{"Cock":"Good","Owl":"Bad","Vulture":"Neutral","Crow":"Good","Peacock":"Neutral"},
  "Peacock":{"Cock":"Neutral","Owl":"Good","Vulture":"Bad","Crow":"Neutral","Peacock":"Good"}
};

function getBird(nak,phase){
  if(phase=="valarpirai") return pakshiMapValarpirai[nak];
  if(phase=="theipirai") return pakshiMapTheipirai[nak];
  return null;
}

function fmt(d){ return d.toTimeString().slice(0,5); }

function showBirdSchedule(){
  let nak = document.getElementById("nakshatra").value;
  let phase = document.getElementById("moonPhase").value;
  if(!nak || !phase){ alert("Select Nakshatra & Moon Phase"); return; }

  let yourBird = getBird(nak,phase);
  let now = new Date();
  let schedules = "";

  ["Today","Tomorrow"].forEach((dayLabel,idx)=>{
    let baseDate=new Date(); baseDate.setDate(now.getDate()+idx);
    let sunrise=new Date(baseDate); sunrise.setHours(6,0,0,0);
    let sunset=new Date(baseDate); sunset.setHours(18,0,0,0);
    let dayDur=(sunset-sunrise)/5, nightDur=(24*60*60*1000-(sunset-sunrise))/5;

    schedules+=`<div class="summary ${idx==0?'today':'tomorrow'}">
      <b>${dayLabel}:</b> Your bird is ${yourBird} (${birdTamil[yourBird]})
    </div>`;
    schedules+=`<h3>${dayLabel} Daytime</h3><table><tr><th>Time</th><th>State</th></tr>`;
    for(let i=0;i<5;i++){
      let start=new Date(sunrise.getTime()+i*dayDur), end=new Date(sunrise.getTime()+(i+1)*dayDur);
      let state=cycle[yourBird][i], highlight=(now>=start&&now<end&&idx==0)?"highlight":"";
      schedules+=`<tr class="${highlight}"><td>${fmt(start)}-${fmt(end)}</td><td>${state} (${stateTamil[state]})</td></tr>`;
    }
    schedules+="</table><h3>"+dayLabel+" Nighttime</h3><table><tr><th>Time</th><th>State</th></tr>";
    for(let i=0;i<5;i++){
      let start=new Date(sunset.getTime()+i*nightDur), end=new Date(sunset.getTime()+(i+1)*nightDur);
      let state=cycle[yourBird][i], highlight=(now>=start&&now<end&&idx==0)?"highlight":"";
      schedules+=`<tr class="${highlight}"><td>${fmt(start)}-${fmt(end)}</td><td>${state} (${stateTamil[state]})</td></tr>`;
    }
    schedules+="</table>";
  });

  document.getElementById("result").innerHTML=schedules;
}

function checkCompatibility(){
  let nak=document.getElementById("nakshatra").value;
  let phase=document.getElementById("moonPhase").value;
  let partnerNak=document.getElementById("partnerNakshatra").value;
  let partnerPhase=document.getElementById("partnerPhase").value;
  if(!nak||!phase||!partnerNak||!partnerPhase){ alert("Select both sides fully"); return; }

  let yourBird=getBird(nak,phase);
  let partnerBird=getBird(partnerNak,partnerPhase);
  let relation=compatibility[yourBird][partnerBird];

  let adviceMsg="";
  if(relation=="Good") adviceMsg="✅ Favorable, auspicious for love/marriage.";
  if(relation=="Neutral") adviceMsg="⚠️ Neutral, okay for friendship, not strong for marriage.";
  if(relation=="Bad") adviceMsg="❌ Avoid, not auspicious for partnership.";

  document.getElementById("compatResult").innerHTML=
    `You: ${yourBird} (${birdTamil[yourBird]})<br>
     Partner: ${partnerBird} (${birdTamil[partnerBird]})<br>
     Compatibility: <b>${relation}</b><br>${adviceMsg}`;
}
</script>
</body>
</html>
